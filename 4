/*
4. Crie uma estrutura representando os alunos de um determinado curso.
   A estrutura deve conter:
   - matrícula do aluno
   - nome
   - nota da primeira prova
   - nota da segunda prova
   - nota da terceira prova

   (a) Permita ao usuário entrar com os dados de 5 alunos.
   (b) Encontre o aluno com maior nota da primeira prova.
   (c) Encontre o aluno com maior média geral.
   (d) Encontre o aluno com menor média geral.
   (e) Para cada aluno diga se ele foi aprovado ou reprovado (média >= 6).

*/

#include <stdio.h>   // Biblioteca padrão de entrada e saída (printf, scanf)
#include <stdlib.h>  // Biblioteca padrão (para system("pause"))
#include <string.h>  // Biblioteca para manipulação de strings (fgets, strlen)


// --- DEFINIÇÃO DA ESTRUTURA ---
struct Aluno
{
    int matricula;       // Campo para número de matrícula
    char nome[50];       // Campo para o nome do aluno
    float n1, n2, n3;    // Campos para armazenar as três notas
};


int main()
{
    struct Aluno alunos[5];  // Vetor com 5 alunos
    int i;                   // Variável de controle do loop
    float maior_n1 = 0;      // Guarda a maior nota da primeira prova
    int indice_maior_n1 = 0; // Guarda o índice do aluno com maior n1

    float maior_media = 0;   // Guarda a maior média geral
    int indice_maior_media = 0; // Guarda índice do aluno com maior média

    float menor_media = 10;  // Guarda a menor média geral (começa em 10)
    int indice_menor_media = 0; // Guarda índice do aluno com menor média

    float media;             // Variável temporária para cálculos

    printf("=== Cadastro de 5 alunos ===\n\n");

    // --- (a) Entrada dos dados dos alunos ---
    for (i = 0; i < 5; i++)
    {
        printf("Aluno %d:\n", i + 1);

        printf("Matricula: ");
        scanf("%d", &alunos[i].matricula); // Lê a matrícula (inteiro)

        getchar(); // Limpa o '\n' deixado no buffer

        printf("Nome: ");
        fgets(alunos[i].nome, sizeof(alunos[i].nome), stdin); // Lê o nome (aceita espaços)
        alunos[i].nome[strcspn(alunos[i].nome, "\n")] = '\0'; // Remove o '\n' do final

        printf("Nota da 1a prova: ");
        scanf("%f", &alunos[i].n1); // Lê nota 1

        printf("Nota da 2a prova: ");
        scanf("%f", &alunos[i].n2); // Lê nota 2

        printf("Nota da 3a prova: ");
        scanf("%f", &alunos[i].n3); // Lê nota 3

        printf("\n");
    }

    // --- (b, c, d) Processamento das médias e comparações ---
    for (i = 0; i < 5; i++)
    {
        media = (alunos[i].n1 + alunos[i].n2 + alunos[i].n3) / 3; // Calcula a média

        // Verifica maior nota da 1ª prova
        if (alunos[i].n1 > maior_n1) // Se a nota da primeira prova do aluno atual for maior do que a maior nota registrada até agora…
        {
            maior_n1 = alunos[i].n1;
            indice_maior_n1 = i; // Guarda índice do aluno
        }

        // Verifica maior média geral
        if (media > maior_media) // A média deste aluno é maior do que a maior média que eu já vi?
        {
            maior_media = media;
            indice_maior_media = i;
        }

        // Verifica menor média geral
        if (media < menor_media) // A média deste aluno é menor do que a menor média que eu já vi?
        {
            menor_media = media;
            indice_menor_media = i;
        }
    }

    // --- (b) Exibe aluno com maior nota da primeira prova ---
    printf("\nAluno com maior nota da primeira prova:\n");
    printf("Nome: %s\n", alunos[indice_maior_n1].nome);
    printf("Matricula: %d\n", alunos[indice_maior_n1].matricula);
    printf("Nota da 1a prova: %.2f\n", alunos[indice_maior_n1].n1);

    // --- (c) Exibe aluno com maior média geral ---
    printf("\nAluno com maior media geral:\n");
    printf("Nome: %s\n", alunos[indice_maior_media].nome);
    printf("Matricula: %d\n", alunos[indice_maior_media].matricula);
    printf("Media geral: %.2f\n", maior_media);

    // --- (d) Exibe aluno com menor média geral ---
    printf("\nAluno com menor media geral:\n");
    printf("Nome: %s\n", alunos[indice_menor_media].nome);
    printf("Matricula: %d\n", alunos[indice_menor_media].matricula);
    printf("Media geral: %.2f\n", menor_media);

    // --- (e) Verifica aprovação ou reprovação ---
    printf("\n=== Resultado final dos alunos ===\n");
    for (i = 0; i < 5; i++)
    {
        media = (alunos[i].n1 + alunos[i].n2 + alunos[i].n3) / 3; // Calcula média novamente
        printf("\nAluno: %s\n", alunos[i].nome);
        printf("Matricula: %d\n", alunos[i].matricula);
        printf("Media: %.2f - ", media);

        if (media >= 6)
            printf("APROVADO\n"); // Se média >= 6
        else
            printf("REPROVADO\n"); // Caso contrário
    }

    system("pause"); // Mantém o console aberto (somente Windows)
    return 0;        // Indica que o programa terminou com sucesso
}
